@use "../mixins/media";

@mixin menu-open {
  width: var(--menu-expanded-width);
  transform: translateX(0);
  .logo {
    transform: translateX(0);
  }
}

@mixin menu-hidden {
  width: 0;
  transform: translateX(calc(var(--menu-expanded-width) * -1));
  .logo {
    transform: translateX(calc(var(--menu-expanded-width) * -1));
  }
}

@mixin menu-collapsed-large {
  width: var(--menu-collapsed-width);
  transform: translateX(0);
  .logo {
    transform: translateX(calc(var(--menu-expanded-width) * -1));
  }
}

@mixin menu-expanded-large {
  width: var(--menu-expanded-width);
  transform: translateX(0);
  .logo {
    transform: translateX(0);
  }
}

@mixin menu-open {
  width: var(--menu-expanded-width);
  transform: translateX(0);
  .logo {
    transform: translateX(0);
  }
}

@mixin menu-hidden {
  width: 0;
  transform: translateX(calc(var(--menu-expanded-width) * -1));
  .logo {
    transform: translateX(calc(var(--menu-expanded-width) * -1));
  }
}

@mixin menu-collapsed-large {
  width: var(--menu-collapsed-width);
  transform: translateX(0);
  .logo {
    transform: translateX(calc(var(--menu-expanded-width) * -1));
  }
}

@mixin menu-expanded-large {
  width: var(--menu-expanded-width);
  transform: translateX(0);
  .logo {
    transform: translateX(0);
  }
}

:root {
  div.split-pane,
  div.stretch-pane {
    div[role="menu"] {
      max-height: 100vh;
      display: flex;
      flex-shrink: 0;
      flex-direction: column;
      box-sizing: border-box;

      transform: translateX(-200px);
      z-index: var(--menu-z-index);

      button {
        &.menu-collapse {
          display: flex;
          opacity: 0;
          visibility: hidden;
          transition:
            opacity var(--animation-time-long),
            transform var(--animation-time-normal);

          padding: var(--padding-0_5x);
          margin: 0 auto;

          background: var(--card-background);
          color: var(--tertiary);

          min-width: var(--padding-4x);
          height: var(--padding-4x);
          min-height: var(--padding-4x);

          transform: rotate(0deg);
        }

        &.menu-collapse {
          position: absolute;
          right: calc(-1 * var(--padding-2x));
          bottom: var(--padding-8x);
        }
      }

      [role="menuitem"] {
        span,
        div {
          opacity: 1;
          transition: opacity var(--animation-time-normal);
        }
      }
    }
  }

  &[menu="collapsed"] {
    div.split-pane,
    div.stretch-pane {
      div[role="menu"]:not(.open) {
        button.menu-collapse {
          transform: rotate(180deg);

          @include media.min-width(large) {
            opacity: 1;
            visibility: visible;
          }
        }

        [role="menuitem"] {
          span,
          div {
            opacity: 0;
          }
        }
      }
    }
  }

  &:not([menu="collapsed"]) {
    div.split-pane,
    div.stretch-pane {
      div[role="menu"] {
        @include media.min-width(large) {
          button.menu-collapse {
            opacity: 1;
            visibility: visible;
          }
        }
      }
    }
  }

  //menu width and transitions

  &[menu="collapsed"] {
    div.split-pane,
    div.stretch-pane {
      div[role="menu"].open {
        //small screen menu collapsed and visible
        @include menu-open;
      }

      div[role="menu"]:not(.open) {
        //small screen menu collapsed and hidden
        @include menu-hidden;

        @include media.min-width(large) {
          //large screen collapsed menu width
          @include menu-collapsed-large;
        }
      }
    }
  }

  &:not([menu="collapsed"]) {
    div.split-pane,
    div.stretch-pane {
      div[role="menu"].open {
        //small screen visible menu width
        @include menu-open;
      }

      div[role="menu"]:not(.open) {
        //small screen hidden menu width
        @include menu-hidden;

        @include media.min-width(large) {
          //large screen expanded menu width
          @include menu-expanded-large;
        }
      }
    }
  }

  //transitions
  &[menu="collapsed"],
  &:not([menu="collapsed"]) {
    div.split-pane,
    div.stretch-pane {
      div[role="menu"]:not(.open),
      div[role="menu"] {
        transition:
          transform var(--animation-time-normal)
            var(--menu-animation-timing-function),
          width var(--animation-time-normal)
            var(--menu-animation-timing-function);
        .logo {
          transition: transform var(--animation-time-normal)
            var(--menu-animation-timing-function);
        }
      }
    }
  }
}
