@use "../mixins/media";

:root {
  div.split-pane,
  div.stretch-pane {
    div[role="menu"] {
      max-height: 100vh;
      display: flex;
      flex-direction: column;
      box-sizing: border-box;

      transform: translateX(-200px);
      z-index: var(--menu-z-index);

      transition: width var(--animation-time-normal)
        var(--menu-animation-timing-function);

      .logo {
        transition: transform var(--animation-time-normal)
          var(--menu-animation-timing-function);
      }

      button {
        &.menu-collapse {
          display: flex;
          opacity: 0;
          visibility: hidden;
          transition:
            opacity var(--animation-time-long),
            transform var(--animation-time-normal);

          padding: var(--padding-0_5x);
          margin: 0 auto;

          background: var(--card-background);
          color: var(--tertiary);

          width: var(--padding-4x);
          height: var(--padding-4x);
          min-height: var(--padding-4x);

          transform: rotate(0deg);
        }

        &.menu-collapse {
          position: absolute;
          right: calc(-1 * var(--padding-2x));
          bottom: var(--padding-8x);
        }
      }

      [role="menuitem"] {
        span,
        div {
          opacity: 1;
          transition: opacity var(--animation-time-normal);
        }
      }
    }
  }

  &[menu="collapsed"] {
    div.split-pane,
    div.stretch-pane {
      div[role="menu"]:not(.open) {
        //large screen collapsed menu width
        width: calc(var(--menu-collapsed-width) + var(--padding-2x));

        transform: translateX(0);
        transition:
          transform var(--animation-time-normal)
            var(--menu-animation-timing-function),
          width var(--animation-time-normal)
            var(--menu-animation-timing-function);

        .logo {
          transition: transform var(--animation-time-normal)
            var(--menu-animation-timing-function);
          transform: translateX(calc(var(--menu-expanded-width) * -1));
        }

        button.menu-collapse {
          transform: rotate(180deg);

          @include media.min-width(large) {
            opacity: 1;
            visibility: visible;
          }
        }

        [role="menuitem"] {
          span,
          div {
            opacity: 0;
          }
        }
      }
    }
  }

  &:not([menu="collapsed"]) {
    div.split-pane,
    div.stretch-pane {
      div[role="menu"] {
        //small screen visible menu width
        width: var(--menu-expanded-width);

        transform: translateX(0);

        transition:
          transform var(--animation-time-normal)
            var(--menu-animation-timing-function),
          width var(--animation-time-normal)
            var(--menu-animation-timing-function);

        .logo {
          transform: translateX(0);
          transition: transform var(--animation-time-normal)
            var(--menu-animation-timing-function);
        }

        @include media.min-width(large) {
          button.menu-collapse {
            opacity: 1;
            visibility: visible;
          }
        }
      }
    }
  }

  &:not([menu="collapsed"]) {
    div.split-pane,
    div.stretch-pane {
      div[role="menu"]:not(.open) {
        //small screen hidden menu width
        width: 0;

        transform: translateX(calc(var(--menu-expanded-width) * -1));

        transition:
          transform var(--animation-time-normal)
            var(--menu-animation-timing-function),
          width var(--animation-time-normal)
            var(--menu-animation-timing-function);

        .logo {
          transform: translateX(calc(var(--menu-expanded-width) * -1));
          transition: transform var(--animation-time-normal)
            var(--menu-animation-timing-function);
        }

        @include media.min-width(large) {
          //large screen expanded menu width
          width: var(--menu-expanded-width);

          transform: translateX(0);

          .logo {
            transform: translateX(0);
          }
        }
      }
    }
  }
}
